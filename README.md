# KeycloackFastApi

[Keycloak](https://www.keycloak.org/)

![picture_1.png](img/picture_1.png)

![picture_2.png](img/picture_2.png)

**Keycloak** ‚Äî —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ –¥–æ—Å—Ç—É–ø–æ–º (`IAM`), —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –∫–æ–º–ø–∞–Ω–∏–µ–π `Red Hat`

–û–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –∏ —Å–µ—Ä–≤–∏—Å–∞—Ö.

`Keycloak` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ `OAuth2`, `OpenID Connect` –∏ `SAML 2.0`, –∏ –º–æ–∂–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Keycloak

**–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –º—ã –ø–µ—Ä–µ–π–¥–µ–º –∫ –ø—Ä–∞–∫—Ç–∏–∫–µ, –¥–∞–≤–∞–π—Ç–µ –∫—Ä–∞—Ç–∫–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Ç–µ—Ä–º–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è:**

- `Realm (–†–µ–∞–ª–º)` ‚Äî –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±–ª–∞—Å—Ç—å, –≤ –∫–æ—Ç–æ—Ä–æ–π –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–ª–∏–µ–Ω—Ç—ã, —Ä–æ–ª–∏ –∏ –≥—Ä—É–ø–ø—ã. –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∞–ª–º–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏–ª–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–π.

- `Client (–ö–ª–∏–µ–Ω—Ç)` ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —É `Keycloak` (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∫–ª–∏–µ–Ω—Ç–æ–º –±—É–¥–µ—Ç FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

- `User (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)` ‚Äî —Å—É–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ `Keycloak`

- `Role (–†–æ–ª—å)` ‚Äî –Ω–∞–±–æ—Ä –ø—Ä–∞–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º. –†–æ–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–ª–∏–µ–Ω—Ç—É –∏–ª–∏ –±—ã—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –¥–ª—è —Ä–µ–∞–ª–º–∞.

- `Group (–ì—Ä—É–ø–ø–∞)` ‚Äî –Ω–∞–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞–∑–Ω–∞—á–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ä–æ–ª–∏.

- `Protocol (–ü—Ä–æ—Ç–æ–∫–æ–ª)` ‚Äî `Keycloak` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –≤–∫–ª—é—á–∞—è `OpenID Connect (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ OAuth 2.0)` –∏ `SAML 2.0`(–≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `OpenID Connect`).

### –ü–æ–¥–Ω–∏–º–∞–µ–º —Å–∞–º Keycloak

**–î–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è `Keycloak` –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. **–°–æ–∑–¥–∞–µ–º –ø—Ä–æ–µ–∫—Ç:**

- - `–¢–∏–ø`: –ü—Ä–µ–¥–Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
- - `–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ä–≤–∏—Å–∞`: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- - `–¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞`: `Keycloak`
- - `–¢–∞—Ä–∏—Ñ`: –Ω–µ –Ω–∏–∂–µ ¬´–ù–∞—á–∞–ª—å–Ω—ã–π¬ª –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

2. **–ù–∞ —ç—Ç–∞–ø–µ ¬´–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è¬ª –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`envvars`):**

- - `KC_BOOTSTRAP_ADMIN_USERNAME` ‚Äî –∏–º—è (`login`) –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- - `KC_BOOTSTRAP_ADMIN_PASSWORD` ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- - `KC_DB` ‚Äî —Ç–∏–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –£–∫–∞–∑—ã–≤–∞–µ–º `postgres`
- - `KC_DB_URL_HOST` ‚Äî host –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Ç—É—Ç –∑–∞–¥–∞–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏)
- - `KC_DB_URL_PORT` ‚Äî –ø–æ—Ä—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `5432` –¥–ª—è `PostgreSQL`, –µ—Å–ª–∏ –ø–æ–¥–Ω–∏–º–∞–ª–∏ –Ω–∞ `Amvera`)
- - `KC_DB_URL_DATABASE` ‚Äî –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- - `KC_DB_USERNAME` ‚Äî –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- - `KC_DB_PASSWORD` ‚Äî –ø–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

3. **–í —Ä–∞–∑–¥–µ–ª–µ ¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∏¬ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**

- - –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è –∏–ª–∏ –¥–æ–±–∞–≤–ª—è–µ–º —Å–≤–æ—ë

4. **–î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:**

- - `KC_HOSTNAME` ‚Äî –≤–∞—à–µ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è

---

üíº **–ê–≤—Ç–æ—Ä:** –î—É–ø–ª–µ–π –ú–∞–∫—Å–∏–º –ò–≥–æ—Ä–µ–≤–∏—á

üì≤ **Telegram:** @quadd4rv1n7

üìÖ **–î–∞—Ç–∞:** 10.05.2025

‚ñ∂Ô∏è **–í–µ—Ä—Å–∏—è 1.0**

```textline
‚Äª –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤—É –º–æ–∂–µ—Ç–µ –ø—Ä–∏—Å—ã–ª–∞—Ç—å –Ω–∞ –ø–æ—á—Ç—É ‚Äª
üìß maksimqwe42@mail.ru
```
